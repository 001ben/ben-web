(function(){angular.module("iconSelector",["ngMaterial"])}).call(this),function(){var e,n,o,r,t,i,c={}.hasOwnProperty;r=i=t=null,o=function(e,n){var l,a,u,s,f,p,h,g,d;if(l=f=p=null,null==t)if("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String)e===i&&(t={v:e,p:n});else{if(-1!==r.indexOf(e))return;if(r.push(e),"[object Array]"===Object.prototype.toString.apply(e))for(a=u=0,s=e.length;s>u;a=++u){if(d=e[a],null!=t)return;o(d,n+"["+a+"]")}else for(h in e)if(c.call(e,h)){if(g=e[h],null!=t)return;o(g,n+"["+JSON.stringify(h)+"]")}}},e=function(){return r=i=t=null},n=function(n,c){var l;return r=[],i=c,o(n,"$"),l=t,e(),l},angular.module("iconSelector").service("decyclicSearch",function(){return{search:n}})}.call(this),function(){var e;e=function(e,n,o,r,t){var i,c,l,a,u,s,f,p,h,g,d,m,v,S,b,y,w,x,D,k,C,O,P,j,V,M,I,N,Y;I=this,this.screens={search:"search",load:"load",position:"position"},this.imageProperties={"background-size":"contain","background-position":"50% 50%","background-repeat":"no-repeat","border-radius":"initial",position:"relative",height:"128px",width:"128px",top:"0px",left:"0px"},this.currentScreen=this.screens.search,o(function(){n.render("icon-select-search",I.preSearchValue),N()},0),p=null,y="#icon-select-search .gs-image-thumbnail-box img",s=new MutationObserver(function(){var e;$(".gs-result").removeAttr("onmouseover"),e=$(y).first().attr("src"),p!==e&&(p=e,$(y).click(function(e){var n,o;e.preventDefault(),o=$(e.target).attr("src"),n=f(o),r.$apply(function(){I.currentScreen=I.screens.load}),d(n,o)}))}),N=function(){s.observe($("#icon-select-search")[0],{childList:!0,subtree:!0})},b=null,c=function(){null!=b&&(b.remove(),b=null)},d=function(e,n){c(),b=$("<img>",{src:e,error:function(){null!=n?d(n):r.$apply(function(){console.error("something fucked up"),I.currentScreen=I.screens.search})},load:function(){w(e)}})},r.$watch(function(){return I.scrollDimension},function(e){e!==m.getVal()&&m.modify(m.getVal()-e)}),C=function(e,n,o){var r,t;return t=e,r={modify:function(e){null!=r.validationSet?t=r.validationSet(t,e):t+=e,null!=r.onChange&&r.onChange(t,e)},getVal:function(){return angular.copy(t)},validationSet:o,onChange:n},null!=n&&n(t,null),r},P=function(e){return function(n){I.imageProperties[e]=n+"px"}},O=function(){var e,n;return e=P("height"),n=P("width"),function(o,r){return e(o),n(o),null!=r?(v.modify(r/2),S.modify(r/2),I.scrollDimension=o):void 0}},u=function(e,n){return e-=n,e=Math.max(e,I.minDimension),e=Math.min(e,I.maxDimension)},j=function(e,n){return e+=n,e=Math.max(e,128-m.getVal()),e=Math.min(e,0)},l=a=null,Y=2,w=function(e){I.imageProperties["background-image"]="url("+e+")",c(),g().on("pointerdown",function(e){e.preventDefault(),l=e.pageX,a=e.pageY,g().on("pointermove",k),g().on("pointerup",D)}),g().mousewheel(V),r.$apply(function(){I.currentScreen=I.screens.position})},k=function(e){var n,o;e.preventDefault(),n=e.pageX-l,o=e.pageY-a,l=e.pageX,a=e.pageY,r.$apply(function(){v.modify(n),S.modify(o)})},D=function(){g().off("pointermove"),g().off("pointerup")},V=function(e){var n;e.preventDefault(),n=e.deltaY*Y,r.$apply(function(){m.modify(n)})},g=function(){return $("#icon-select-draggable")},M=x=null,i=google.search,f=function(e){var n;return M=i,null!=x&&(M=h(x,i,3),M||(console.error("no object found from last path"),x=null,M=i)),n=t.search(M,e),null!=n?(x?console.log("last obj path worked!! :D"):x=n.p,n=h(n.p,M,1),n.url):null!=x?(x=null,console.log("lastObjPath didnt work, defaulting to full search"),f(e)):(console.error("tried to find, did not work :("),"")},v=C(-32,P("left"),j),S=C(-35,P("top"),j),m=C(198,O(),u),this.minDimension=128,this.maxDimension=600,this.scrollDimension=m.getVal(),h=function(e,n,o){var r,t,i;for(null==o&&(o=0),e=e.trim("$").replace(/(\$\[|\])/g,"").split("["),r=t=0,i=e.length-o;i>=0?i>t:t>i;r=i>=0?++t:--t)n=n[JSON.parse(e[r])];return n},this.accept=function(){I.currentScreen=I.screens.load,I.imageUploader(I.showId,I.imageProperties).success(function(e){I.close(e)}).error(function(e){console.error(e),I.currentScreen=I.screens.search})},this.back=function(){I.currentScreen=I.screens.search},this.close=function(n){var o;s.disconnect(),g().unbind(),I.imageProperties={},o={hasNewImage:null!=n,newImageProperties:n},e.hide(o)}},angular.module("iconSelector").controller("iconSelectorController",["$mdDialog","cseRenderer","$timeout","$scope","decyclicSearch",e])}.call(this),function(){var e;e=function(e,n){var o;return{getShowSelector:o=function(o,r,t,i){return function(){e.show({clickOutsideToClose:!1,escapeToClose:!1,templateUrl:"/html/icon-selector-dialog.html",controller:"iconSelectorController",controllerAs:"icon",locals:{preSearchValue:r(),showId:t(),imageUploader:i},bindToController:!0}).then(function(e){null!=n.$$phase?o(e):n.$apply(function(){o(e)})})}}}},angular.module("iconSelector").service("iconSelectorService",["$mdDialog","$rootScope",e])}.call(this),function(){var e;e=function(e){var n,o,r;return o="002346021416897782818:ziotcz2o5qa",n=null,r={initialised:!1,initialise:function(n){window.__gcse={parsetags:"explicit",callback:n||function(){r.initialised=!0}},$.getScript(e.protocol()+"://cse.google.com/cse.js?cx="+o)},render:function(e,o){var t;r.initialised?(t={div:e,tag:"search",attributes:{enableImageSearch:!0,disableWebSearch:!0,imageSearchLayout:"popup"}},n=google.search.cse.element.render(t),o&&n.execute(o)):r.initialise(function(){return r.initialised=!0,render(e,o)})}}},angular.module("iconSelector").service("cseRenderer",["$location",e])}.call(this);
//# sourceMappingURL=../../maps/icon-selector.all.min.js.map