(function(){var e,t;e=function(e,t,n){t.defaultIconSet("./assets/svg/avatars.svg",128).icon("menu","./assets/svg/menu.svg",24).icon("share","./assets/svg/share.svg",24).icon("google_plus","./assets/svg/google_plus.svg",512).icon("hangouts","./assets/svg/hangouts.svg",512).icon("twitter","./assets/svg/twitter.svg",512).icon("phone","./assets/svg/phone.svg",512),e.theme("default").primaryPalette("grey").accentPalette("blue"),n.objectFor("show-image",{"background-size":"cover","background-position":"50% 50%","background-repeat":"no-repeat"})},t=function(e){e.initialise(),$(".avatar-container").hover(function(){$(".avatar-image").addClass("image-hover"),$(".add-image").addClass("image-hover")},function(){$(".avatar-image").removeClass("image-hover"),$(".add-image").removeClass("image-hover")})},angular.module("shows",["ngMaterial","ngMessages","iconSelector"]).config(["$mdThemingProvider","$mdIconProvider","extendDefaultObjectsProvider",e]).run(["cseRenderer",t])}).call(this),function(){angular.module("shows").constant("showType",{episodes:"episodes",seasons:"seasons",movie:"movie"})}.call(this),function(){var e;e=function(e,t,n,o,s,r,i,a){var l,c,d,u,h,g;g=this,this.shows=[],this.loading=!0,this.showType=n,this.ascending=!1,this.selected={name:" "},this.orderByOptions=[["Date Modified","modified"],["Name","name"],["Watched","watched"]],this.orderBy="modified",d={},i.all([e.loadAllShows(),e.loadShowOrder()]).then(function(e){return e.map(function(e){return e.data})}).then(function(e){var t,n,o,s,r;r=e[0];for(t in g.showForm)"$"!==t[0]&&(d[t]=g.showForm[t]);g.orderBy=null!=(n=e[1].showsOrderedBy)?n:"modified",g.ascending=null!=(o=e[1].showsOrderedAscending)?o:!1,g.shows=[].concat(r),r.length>0?(g.shows=a(g.shows,g.orderBy,!g.ascending),g.selected=g.shows[0]):(s={},g.shows.unshift(s),g.selected=s),g.loading=!1}),this.toggleShowsList=function(){s("left").toggle()},this.selectShow=function(e){g.showForm.$invalid||(g.showForm.$dirty?(t.clear(),h()):(g.selected=angular.isNumber(e)?g.shows[e]:e,g.toggleShowsList()))},this.addShow=function(){var e;g.showForm.$invalid||(g.showForm.$dirty?(t.clear(),h()):(e={},g.shows.unshift(e),g.selected=e))},this.openIconSelector=o.getShowSelector(function(e){e.hasNewImage&&(g.selected.image=e.newImageProperties)},function(){return g.selected.name},function(){return g.selected._id},e.uploadImage),this.invertOrder=function(){this.ascending=!this.ascending},this.onFieldChange=function(){g.selected.modified=(new Date).toISOString(),t.start(h)},this.onOrderChange=function(){e.updateShowOrder(g.orderBy,g.ascending)},c=function(){var e,t,n,o;t={},e=!1;for(o in d)if(n=d[o],n.$dirty){if(n.$invalid)return r.error("A field was invalid though the form was not"),null;e=!0,t[o]=g.selected[o]}return e?t:(r.error("All fields are pristine"),null)},h=function(){var t;g.showForm.$invalid||(t=c(),null!=t&&(null!=g.selected._id?e.updateShow(g.selected._id,t).success(function(){l()}).error(function(e){u(e,t)}):e.createShow(g.selected).success(function(e){l(),g.selected._id=e}).error(function(e){u(e,t)})))},l=function(){return g.showForm.$setPristine(),g.showForm.$setUntouched()},u=function(e,n){r.info(e),e.validationFailed===!0&&t.start(h)}},angular.module("shows").controller("showController",["showData","debouncer","showType","iconSelectorService","$mdSidenav","$log","$q","orderByFilter",e])}.call(this),function(){var e;e=function(e,t){return{loadAllShows:function(){return t.get("/shows")},loadShowOrder:function(){return t.get("/shows/order")},updateShowOrder:function(e,n){return t.post("/shows/updateOrder",{showsOrderedBy:e,showsOrderedAscending:n})},updateShow:function(e,n){return t.post("/shows/update/"+e,n)},createShow:function(e){return t.post("/shows/create",e)},uploadImage:function(e,n){return t.post("/shows/image/"+e,n)}}},angular.module("shows").service("showData",["$q","$http",e])}.call(this),function(){var e;e=function(e){return{restrict:"A",require:"ngModel",transclude:!0,template:'<div><span contenteditable ng-style="style" data-ph="{{placeholder}}"></span></div><ng-transclude></ng-transclude>',scope:{modelValue:"=ngModel",tabindex:"=",placeholder:"@"},link:function(t,n,o,s){var r,i,a;r=angular.element(n.children()[0].childNodes[0]),t.isEmpty=!1,t.style={},a=function(n){t.isEmpty!==!n&&(t.isEmpty=!t.isEmpty,t.isEmpty?t.style={display:"inline-block",width:e("sm")?"80%":"200px"}:t.style={})},i=function(){var e;e=r.text(),a(e),s.$setViewValue(e)},s.$render=function(){var e;e=s.$viewValue||"",a(e),r.text(e)},r.bind("blur keyup change",function(){null!=t.$$phase?i():t.$apply(i)})}}},angular.module("shows").directive("benEditable",["$mdMedia",e])}.call(this),function(){var e,t;t=function(){var e;return e={},{objectFor:function(t,n){return e[t]=n,this},$get:function(){return{getObjectFor:function(t){var n,o;for(o in e)if(n=e[o],o===t)return n},extendObject:function(e,t){return angular.extend({},this.getObjectFor(e),t)}}}}},e=function(e){return function(t,n){return e.extendObject(n,t)}},angular.module("shows").provider("extendDefaultObjects",t).filter("extendDefault",["extendDefaultObjects",e])}.call(this),function(){var e,t;t=1e3,e=function(e){var n,o,s,r;return s=null,o=function(){return null!=s?(e.cancel(s),s=null):void 0},r=function(r){o(),s=e(n,t,1,!0,r)},n=function(e){return o(),e()},{clear:o,start:r}},angular.module("shows").service("debouncer",["$interval",e])}.call(this);
//# sourceMappingURL=../../maps/shows.all.min.js.map
