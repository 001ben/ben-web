(function(){var e,n;e=function(e,n,t){n.defaultIconSet("./assets/svg/avatars.svg",128).icon("menu","./assets/svg/menu.svg",24).icon("share","./assets/svg/share.svg",24).icon("google_plus","./assets/svg/google_plus.svg",512).icon("hangouts","./assets/svg/hangouts.svg",512).icon("twitter","./assets/svg/twitter.svg",512).icon("phone","./assets/svg/phone.svg",512),e.theme("default").primaryPalette("blue-grey").accentPalette("blue"),t.objectFor("show-image",{"background-size":"cover","background-position":"50% 50%","background-repeat":"no-repeat"})},n=function(e){e.initialise(),$(".avatar-container").hover(function(){$(".avatar-image").addClass("image-hover"),$(".add-image").addClass("image-hover")},function(){$(".avatar-image").removeClass("image-hover"),$(".add-image").removeClass("image-hover")})},angular.module("shows",["ngMaterial","ngMessages","iconSelector"]).config(["$mdThemingProvider","$mdIconProvider","extendDefaultObjectsProvider",e]).run(["cseRenderer",n])}).call(this),function(){angular.module("shows").constant("showType",{episodes:"episodes",seasons:"seasons",movie:"movie"})}.call(this),function(){var e;e=function(e,n,t,o,i,r,s){var a,l;l=this,this.shows=[],this.loading=!0,this.showType=t,this.selected={name:" "},e.loadAllShows().success(function(e){l.shows=[].concat(e),l.selected=e[0],l.loading=!1,a()}),this.toggleShowsList=function(){i("left").toggle()},this.selectShow=function(e){!l.showForm.$invalid&&n.storeCurrent()&&(l.selected=angular.isNumber(e)?$scope.shows[e]:e,l.toggleShowsList(),a())},this.addShow=function(){var e;n.storeCurrent()&&(e={},l.shows.unshift(e),l.selected=e,a(!0))},this.openIconSelector=o.getShowSelector(function(e){e.hasNewImage&&(l.selected.image=e.newImageProperties)},function(){return l.selected.name},function(){return l.selected._id},e.uploadImage),a=function(e){var t;t="init"+(e?"New":"Show"),n[t](l.showForm,l.selected),l.showForm.$setPristine(),l.showForm.$setUntouched()}},angular.module("shows").controller("showController",["showData","showSaver","showType","iconSelectorService","$mdSidenav","$log","$q",e])}.call(this),function(){var e;e=function(e,n){return{loadAllShows:function(){return n.get("/shows")},updateShow:function(e,t){return n.post("/shows/update/"+e,t)},createShow:function(e){return n.post("/shows/create",e)},uploadImage:function(e,t){return n.post("shows/image/"+e,t)}}},angular.module("shows").service("showData",["$q","$http",e])}.call(this),function(){var e;e=function(e){return{restrict:"A",require:"ngModel",transclude:!0,template:'<div><span contenteditable ng-style="style" data-ph="{{placeholder}}"></span></div><ng-transclude></ng-transclude>',scope:{modelValue:"=ngModel",tabindex:"=",placeholder:"@"},link:function(n,t,o,i){var r,s,a;r=angular.element(t.children()[0].childNodes[0]),n.isEmpty=!1,n.style={},a=function(t){n.isEmpty!==!t&&(n.isEmpty=!n.isEmpty,n.style=n.isEmpty?{display:"inline-block",width:e("sm")?"80%":"200px"}:{})},s=function(){var e;e=r.text(),a(e),i.$setViewValue(e)},i.$render=function(){var e;e=i.$viewValue||"",a(e),r.text(e)},r.bind("blur keyup change",function(){null!=n.$$phase?s():n.$apply(s)})}}},angular.module("shows").directive("benEditable",["$mdMedia",e])}.call(this),function(){var e,n;n=function(){var e;return e={},{objectFor:function(n,t){return e[n]=t,this},$get:function(){return{getObjectFor:function(n){var t,o;for(o in e)if(t=e[o],o===n)return t},extendObject:function(e,n){return angular.extend({},this.getObjectFor(e),n)}}}}},e=function(e){return function(n,t){return e.extendObject(t,n)}},angular.module("shows").provider("extendDefaultObjects",n).filter("extendDefault",["extendDefaultObjects",e])}.call(this),function(){var e,n,t;t=1e3,n=5,e=function(e,o,i,r){var s,a,l,u,c,d,h,f,v,g,w,m,p,$,b,y,S,j,x,C,F;return d=c=f=h=null,y="newId",v={},x={},F=[],a=function(e){null==e&&(e=d),v[e]&&(v[e].$$state.status||o.cancel(v[e])?v[e]=null:i.error("Could not cancel showId: "+e))},S=function(e,n,i){null==e&&(e=d),null==n&&(n=f),null==i&&(i=0),a(e),v[e]=o(s,t,1,!0,e,n,i)},u=function(e,n){var t,o,r,s;o={},t=!1;for(s in e)if(r=e[s],r.$dirty){if(r.$invalid)return i.error("Should not call copyChangedFields on invalid form"),null;t=!0,o[s]=n[s]}return t?o:void i.error("All model objects are pristine")},s=function(e,n,t){var o;o=null,v[e]=null,null!=x[e]?(o=u(x[e],n),o||i.error("An invalid object was saved")):e===d&&c.$dirty&&c.$valid&&(o=u(h,n),null!=o&&(c.$setPristine(),c.$setUntouched())),o&&(e===y?g(o,t):w(e,o,t))},g=function(n,t){e.createShow(n).success(function(e){return f._id=d=e}).error(m(y,n,t))},w=function(n,t,o){return e.updateShow(n,t).success(function(){x[n]&&(x[n]=null)}).error(m(n,t,o))},m=function(e,t,o){return function(r){var s;if(i.info(r),d===e)for(s in t)h[s].$setDirty(!0),h[s].$setTouched(!0),h[s].$validate();r.validationFailed===!0?a(e):n-1>o?S(e,t,o+1):i.error("Attempted to save "+n+" times unsuccessfully",r)}},j=function(){var e,n,t;if(!d||!h)return i.error("Tried saving current before initialisation"),!1;if(d===y)return!1;if(null!=v[d])if(c.$pristine)a(d);else{if(c.$invalid)return!1;t={};for(n in h)e=h[n],t[n]={$dirty:e.$dirty,$valid:e.$valid};x[d]=t}return!0},l=function(){var e;for(e in v)a(e);for(e in x)x[e]=null;d=c=f=h=null},C=function(){for(var e;0!==F.length;)F.pop()();for(e in c)"$"!==e[0]&&(h[e]=c[e],F.push(r.$watch(function(e){return function(){return f[e]}}(e),function(){S()})))},p=function(e,n){return null!=c&&c.$invalid?void i.error("attempted initialising while current form invalid"):(c=e,f=n,h={},void C())},b=function(e,n){d=n._id,p(e,n)},$=function(e,n){return d===y?void i.error("attempted to initialise a new show before previous new show was saved"):(d=y,void p(e,n))},{initShow:b,initNew:$,storeCurrent:j,clearAll:l}},angular.module("shows").service("showSaver",["showData","$interval","$log","$rootScope",e])}.call(this);
//# sourceMappingURL=../../maps/shows.all.min.js.map