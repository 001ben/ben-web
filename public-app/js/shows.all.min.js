!function(){"use strict";angular.module("shows",["ngMaterial","ngMessages","iconSelector"])}(),function(){angular.module("shows").constant("showType",{episodes:"episodes",seasons:"seasons",movie:"movie"})}(),function(){function e(e,n,t,o,r,i,s){function u(){r("left").toggle()}function l(e){!f.showForm.$invalid&&n.storeCurrent()&&(f.selected=angular.isNumber(e)?$scope.shows[e]:e,f.toggleList(),a())}function a(e){var t="init"+(e?"New":"Show");n[t](f.showForm,f.selected),f.showForm.$setPristine(),f.showForm.$setUntouched()}function c(){if(n.storeCurrent()){var e={};f.shows.unshift(e),f.selected=e,a(!0)}}function d(e){i.info(e)}var f=this;f.selected={name:" "},f.showType=t,f.shows=[],f.selectShow=l,f.toggleList=u,f.addShow=c,f.loading=!0,f.openIconSelector=o.getShowSelector(d),e.loadAllShows().success(function(e){f.shows=[].concat(e),f.selected=e[0],f.loading=!1,a()})}angular.module("shows").controller("showController",["showData","showSaver","showType","iconSelectorService","$mdSidenav","$log","$q",e])}(),function(){"use strict";function e(e,n){return{loadAllShows:function(){return n.get("/shows")},updateShow:function(e,t){return n.post("/shows/update/"+e,t)},createShow:function(e){return n.post("/shows/create",e)}}}angular.module("shows").service("showData",["$q","$http",e])}(),function(){function e(e){return{restrict:"A",require:"ngModel",transclude:!0,template:'<div><span contenteditable tabindex="{{tabindex}}" ng-style="style" data-ph="{{placeholder}}"></span></div><ng-transclude></ng-transclude>',scope:{modelValue:"=ngModel",tabindex:"=",placeholder:"@"},link:function(n,t,o,r){function i(t){n.isEmpty!=!t&&(n.isEmpty=!n.isEmpty,n.style=n.isEmpty?{display:"inline-block",width:e("sm")?"80%":"200px"}:{})}function s(){var e=l.text();i(e),r.$setViewValue(e)}function u(){var e=r.$viewValue||"";i(e),l.text(e)}var l=angular.element(t.children()[0].childNodes[0]);n.isEmpty=!1,n.style={},r.$render=u,l.bind("blur keyup change",function(){n.$$phase?s():n.$apply(s)})}}}angular.module("shows").directive("benEditable",["$mdMedia",e])}(),function(){"use strict";function e(){var e=[];return{objectFor:function(n,t){return e.push([n,t]),this},$get:function(){return{getObjectFor:function(n){for(var t=0;t<e.length;t++)if(e[t][0]==n)return e[t][1]},extendObject:function(e,n){var t=this.getObjectFor(e);return angular.extend({},t,n)}}}}}function n(e){return function(n,t){return e.extendObject(t,n)}}angular.module("shows").provider("extendDefaultObjects",e).filter("extendDefault",["extendDefaultObjects",n])}(),function(){"use strict";function e(e,o,r,i){function s(e){e=e||m,x[e]&&(x[e].$$state.status||o.cancel(x[e])?x[e]=null:r.error("Could not cancel showId: "+e))}function u(e,t,r){e=e||m,t=t||b,r=r||0,s(e),x[e]=o(a,n,1,!0,e,t,r)}function l(e,n){var t={},o=!1;for(var i in e)if(e[i].$dirty){if(e[i].$invalid)return r.error("Should not call copyChangedFields on invalid form"),null;o=!0,t[i]=n[i]}return o?t:void r.error("All model objects are pristine")}function a(e,n,t){var o=null;x[e]=null,j[e]?(o=l(j[e],n),o||r.error("An invalid object was saved")):e==m&&y.$dirty&&y.$valid&&(o=l(S,n),o&&(y.$setPristine(),y.$setUntouched())),o&&(e===A?c(o,t):d(e,o,t))}function c(n,t){e.createShow(n).success(function(e){n._id=e,m=e}).error(f(A,n,t))}function d(n,t,o){e.updateShow(n,t).success(function(){j[n]&&(j[n]=null)}).error(f(n,t,o))}function f(e,n,o){return function(i){if(r.info(i),m==e)for(var l in n)S[l].$setDirty(!0),S[l].$setTouched(!0),S[l].$validate();i.validationFailed===!0?s(e):t-1>o?u(e,n,o+1):r.error("Attempted to save "+t+" times unsuccessfully",i)}}function h(){if(!m||!S)return r.error("Tried saving current before initialisation"),!1;if(m==A)return!1;if(x[m])if(y.$pristine)s(m);else{if(y.$invalid)return!1;var e={};for(var n in S)e[n]={$dirty:S[n].$dirty,$valid:S[n].$valid};j[m]=e}return!0}function v(){for(var e in x)s(e);for(var e in j)j[e]=null;m=null,y=null,b=null,S=null}function w(){for(;F.length>0;)F.pop()();for(var e in y)"$"!=e[0]&&(S[e]=y[e],F.push(i.$watch(function(e){return function(){return b[e]}}(e),function(e,n){u()})))}function p(e,n){return y&&y.$invalid?void r.error("attempted initialising while current form invalid"):(y=e,b=n,S={},void w())}function $(e,n){m=n._id,p(e,n)}function g(e,n){return m==A?void r.error("attempted to initialise a new show before previous new show was saved"):(m=A,void p(e,n))}var m,y,b,S,x={},j={},F=[],A="newId";return{initShow:$,initNew:g,storeCurrent:h,clearAll:v}}angular.module("shows").service("showSaver",["showData","$interval","$log","$rootScope",e]);var n=1e3,t=5}();