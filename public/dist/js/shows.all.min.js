(function(){var e,t;e=function(e,t,n){t.defaultIconSet("./assets/svg/avatars.svg",128).icon("menu","./assets/svg/menu.svg",24).icon("share","./assets/svg/share.svg",24).icon("google_plus","./assets/svg/google_plus.svg",512).icon("hangouts","./assets/svg/hangouts.svg",512).icon("twitter","./assets/svg/twitter.svg",512).icon("phone","./assets/svg/phone.svg",512),e.theme("default").primaryPalette("grey").accentPalette("blue"),n.objectFor("show-image",{"background-size":"cover","background-position":"50% 50%","background-repeat":"no-repeat"})},t=function(e){e.initialise(),$(".avatar-container").hover(function(){$(".avatar-image").addClass("image-hover"),$(".add-image").addClass("image-hover")},function(){$(".avatar-image").removeClass("image-hover"),$(".add-image").removeClass("image-hover")})},angular.module("shows",["ngMaterial","ngMessages","iconSelector"]).config(["$mdThemingProvider","$mdIconProvider","extendDefaultObjectsProvider",e]).run(["cseRenderer",t])}).call(this),function(){angular.module("shows").constant("showType",{episodes:"episodes",seasons:"seasons",movie:"movie"})}.call(this),function(){var e;e=function(e,t,n,o,s,r,i){var a,l,c,d,u,h;h=this,this.shows=[],this.loading=!0,this.showType=n,this.ascending=!1,this.selected={name:" "},this.orderByOptions=[["Date Modified","modified"],["Name","name"],["Watched","watched"]],this.orderBy="modified",c={},i.all([e.loadAllShows(),e.loadShowOrder()]).then(function(e){return e.map(function(e){return e.data})}).then(function(e){var t,n,o,s,r;r=e[0];for(t in h.showForm)"$"!==t[0]&&(c[t]=h.showForm[t]);h.orderBy=null!=(n=e[1].showsOrderedBy)?n:"modified",h.ascending=null!=(o=e[1].showsOrderedAscending)?o:!1,h.shows=[].concat(r),r.length>0?h.selected=r[0]:(s={},h.shows.unshift(s),h.selected=s),h.loading=!1}),this.toggleShowsList=function(){s("left").toggle()},this.selectShow=function(e){h.showForm.$invalid||(h.showForm.$dirty?(t.clear(),u()):(h.selected=angular.isNumber(e)?h.shows[e]:e,h.toggleShowsList()))},this.addShow=function(){var e;h.showForm.$invalid||(h.showForm.$dirty?(t.clear(),u()):(e={},h.shows.unshift(e),h.selected=e))},this.openIconSelector=o.getShowSelector(function(e){e.hasNewImage&&(h.selected.image=e.newImageProperties)},function(){return h.selected.name},function(){return h.selected._id},e.uploadImage),this.invertOrder=function(){this.ascending=!this.ascending},this.onFieldChange=function(){h.selected.modified=(new Date).toISOString(),t.start(u)},this.onOrderChange=function(){e.updateShowOrder(h.orderBy,h.ascending)},l=function(){var e,t,n,o;t={},e=!1;for(o in c)if(n=c[o],n.$dirty){if(n.$invalid)return r.error("A field was invalid though the form was not"),null;e=!0,t[o]=h.selected[o]}return e?t:(r.error("All fields are pristine"),null)},u=function(){var t;h.showForm.$invalid||(t=l(),null!=t&&(null!=h.selected._id?e.updateShow(h.selected._id,t).success(function(){a()}).error(function(e){d(e,t)}):e.createShow(h.selected).success(function(e){a(),h.selected._id=e}).error(function(e){d(e,t)})))},a=function(){return h.showForm.$setPristine(),h.showForm.$setUntouched()},d=function(e,n){r.info(e),e.validationFailed===!0&&t.start(u)}},angular.module("shows").controller("showController",["showData","debouncer","showType","iconSelectorService","$mdSidenav","$log","$q",e])}.call(this),function(){var e;e=function(e,t){return{loadAllShows:function(){return t.get("/shows")},loadShowOrder:function(){return t.get("/shows/order")},updateShowOrder:function(e,n){return t.post("/shows/updateOrder",{showsOrderedBy:e,showsOrderedAscending:n})},updateShow:function(e,n){return t.post("/shows/update/"+e,n)},createShow:function(e){return t.post("/shows/create",e)},uploadImage:function(e,n){return t.post("/shows/image/"+e,n)}}},angular.module("shows").service("showData",["$q","$http",e])}.call(this),function(){var e;e=function(e){return{restrict:"A",require:"ngModel",transclude:!0,template:'<div><span contenteditable ng-style="style" data-ph="{{placeholder}}"></span></div><ng-transclude></ng-transclude>',scope:{modelValue:"=ngModel",tabindex:"=",placeholder:"@"},link:function(t,n,o,s){var r,i,a;r=angular.element(n.children()[0].childNodes[0]),t.isEmpty=!1,t.style={},a=function(n){t.isEmpty!==!n&&(t.isEmpty=!t.isEmpty,t.isEmpty?t.style={display:"inline-block",width:e("sm")?"80%":"200px"}:t.style={})},i=function(){var e;e=r.text(),a(e),s.$setViewValue(e)},s.$render=function(){var e;e=s.$viewValue||"",a(e),r.text(e)},r.bind("blur keyup change",function(){null!=t.$$phase?i():t.$apply(i)})}}},angular.module("shows").directive("benEditable",["$mdMedia",e])}.call(this),function(){var e,t;t=function(){var e;return e={},{objectFor:function(t,n){return e[t]=n,this},$get:function(){return{getObjectFor:function(t){var n,o;for(o in e)if(n=e[o],o===t)return n},extendObject:function(e,t){return angular.extend({},this.getObjectFor(e),t)}}}}},e=function(e){return function(t,n){return e.extendObject(n,t)}},angular.module("shows").provider("extendDefaultObjects",t).filter("extendDefault",["extendDefaultObjects",e])}.call(this),function(){var e,t;t=1e3,e=function(e){var n,o,s,r;return s=null,o=function(){return null!=s?(e.cancel(s),s=null):void 0},r=function(r){o(),s=e(n,t,1,!0,r)},n=function(e){return o(),e()},{clear:o,start:r}},angular.module("shows").service("debouncer",["$interval",e])}.call(this);
//# sourceMappingURL=../../maps/shows.all.min.js.map
